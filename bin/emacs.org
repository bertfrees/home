* emacs

See also: [[file:~/src/github/bertfrees/home/.emacs.d/init.el.org][Emacs configuration in ~/.emacs.d]]

#+NAME: emacs
#+BEGIN_SRC clojure :tangle emacs :tangle-mode (identity #o755)
#!/usr/bin/env bb

;; This file is automatically generated from emacs.org. Don't make
;; changes to this file directly.

(require '[babashka.process :refer [exec sh]])

(let [home-dir (.getParentFile (.getParentFile (io/file *file*)))]
  (when (not (= 0 (:exit (sh {:dir home-dir :out :inherit :err :inherit}
                             "bin/make" ".emacs.d/init.el"
                                        "ssh"
                                        "git"
                                        "Dropbox/.apdisk" ;; for org-roam
                                        ))))
    (System/exit 1))
  (apply exec "/Applications/Emacs.app/Contents/MacOS/Emacs"
         "--init-directory" (.getAbsolutePath (io/file home-dir ".emacs.d"))
         *command-line-args*))
#+END_SRC
