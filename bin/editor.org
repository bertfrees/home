* editor

For ~EDITOR~ environment variable. See [[file:../.zshrc.org][.zshrc]] and [[file:~/.bashrc.org][.bashrc]].

#+NAME: editor
#+BEGIN_SRC clojure :tangle editor :tangle-mode (identity #o755)
#!/usr/bin/env bb

;; This file is automatically generated from editor.org. Don't make
;; changes to this file directly.

(require '[babashka.process :refer [sh]]
         '[clojure.java.io :as io])

(let [client (io/file (.getParentFile (io/file *file*)) "emacsclient")
      client (fn [& args] (:exit (apply sh {:out :inherit :err :inherit} client args)))]
  (if (= "vterm" (System/getenv "INSIDE_EMACS"))
    (apply client *command-line-args*)
    (apply client "-t" *command-line-args*)))
#+END_SRC
